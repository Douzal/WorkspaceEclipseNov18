package fr.afcepf.al32.devise.impl;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.HashMap;
import java.util.Map;

import fr.afcepf.al32.devise.dto.Devise;
import fr.afcepf.al32.devise.itf.IServiceDevis;

// univastRemoteObject est une classe prédéfinie de RMI qu'il faut utiliser côté serveur
public class ServiceDeviseImpl extends UnicastRemoteObject implements IServiceDevis {
	
	private Map<String, Devise> mapDevise = new HashMap<String, Devise>();

	protected ServiceDeviseImpl() throws RemoteException {
		super();
		// super déclanche ici le constructeur de la classe héritée UnicastRemoteObjectr,
		// ce constructeur exporte l'objet de trairtement pour qu'il soit accessioble à distance
		mapDevise.put("EUR", new Devise("EUR", 1.0));
		mapDevise.put("USB", new Devise("USB", 1.1));
		mapDevise.put("GDP", new Devise("GDP", 1.15));
		mapDevise.put("JPY", new Devise("JPY", 1120));
	}

	public double convertir(double montant, String monnaieSource, String monnaieCible) {
		Devise dSource = mapDevise.get(monnaieSource);
		return 0;
	}

	public Devise getDevise(String monnaie) {
		return null;
	}

}
